{"ast":null,"code":"var _jsxFileName = \"/Users/kietla92/travel-app/front-end/src/components/Globe.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Globe = () => {\n  _s();\n  const globeRef = useRef();\n  const [geoJsonCountries, setGeoJsonCountries] = useState([]); // GeoJSON data for globe rendering\n\n  const renderer = useRef(null);\n  const scene = useRef(null);\n  const camera = useRef(null);\n  const globe = useRef(null);\n  const isDragging = useRef(false);\n  const clickStart = useRef(null);\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n  useEffect(() => {\n    // Load the GeoJSON file for country borders (for globe rendering)\n    fetch(\"/data/countries.geojson\").then(response => response.json()).then(geoData => {\n      setGeoJsonCountries(geoData.features); // Store GeoJSON data\n\n      if (!renderer.current && !scene.current && !camera.current) {\n        scene.current = new THREE.Scene();\n        camera.current = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        renderer.current = new THREE.WebGLRenderer();\n        renderer.current.setSize(window.innerWidth, window.innerHeight);\n        globeRef.current.appendChild(renderer.current.domElement);\n        const geometry = new THREE.SphereGeometry(5, 32, 32);\n        const material = new THREE.MeshBasicMaterial({\n          color: 0x87ceeb,\n          wireframe: false\n        });\n        globe.current = new THREE.Mesh(geometry, material);\n        scene.current.add(globe.current);\n        camera.current.position.z = 10;\n        mapCountriesToGlobe(geoData.features); // Map GeoJSON data to the globe\n\n        const animate = () => {\n          requestAnimationFrame(animate);\n          if (!isDragging.current) {\n            globe.current.rotation.y += 0.01;\n          }\n          renderer.current.render(scene.current, camera.current);\n        };\n        animate();\n      }\n    }).catch(error => {\n      console.error(\"Error loading GeoJSON:\", error);\n    });\n\n    // Mouse interaction handlers\n    const handleMouseDown = event => {\n      isDragging.current = false;\n      clickStart.current = {\n        x: event.clientX,\n        y: event.clientY\n      };\n    };\n    const handleMouseMove = event => {\n      if (!clickStart.current) return;\n      const deltaMove = {\n        x: event.clientX - clickStart.current.x,\n        y: event.clientY - clickStart.current.y\n      };\n      if (Math.abs(deltaMove.x) > 2 || Math.abs(deltaMove.y) > 2) {\n        isDragging.current = true;\n        globe.current.rotation.y += deltaMove.x * 0.005;\n        globe.current.rotation.x += deltaMove.y * 0.005;\n        clickStart.current = {\n          x: event.clientX,\n          y: event.clientY\n        };\n      }\n    };\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    return () => {\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  // Function to map GeoJSON countries onto the globe\n  const mapCountriesToGlobe = features => {\n    features.forEach(feature => {\n      const {\n        coordinates\n      } = feature.geometry;\n      const countryGroup = new THREE.Group();\n      if (feature.geometry.type === \"Polygon\") {\n        mapPolygonToGlobe(coordinates, countryGroup);\n      } else if (feature.geometry.type === \"MultiPolygon\") {\n        coordinates.forEach(polygon => {\n          mapPolygonToGlobe(polygon, countryGroup);\n        });\n      }\n      globe.current.add(countryGroup); // Add the country group to the globe\n    });\n  };\n\n  // Helper function to map a single polygon to the globe\n  const mapPolygonToGlobe = (polygon, countryGroup) => {\n    polygon.forEach(coordSet => {\n      const points = [];\n      coordSet.forEach(([longitude, latitude]) => {\n        const phi = (90 - latitude) * (Math.PI / 180);\n        const theta = (longitude + 180) * (Math.PI / 180);\n        const x = 5 * Math.sin(phi) * Math.cos(theta);\n        const y = 5 * Math.cos(phi);\n        const z = 5 * Math.sin(phi) * Math.sin(theta);\n        points.push(new THREE.Vector3(x, y, z));\n      });\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const material = new THREE.LineBasicMaterial({\n        color: 0xffffff,\n        // White color for country borders\n        linewidth: 1,\n        opacity: 0.8,\n        transparent: true\n      });\n      const line = new THREE.Line(geometry, material);\n      countryGroup.add(line);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: globeRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 10\n  }, this);\n};\n_s(Globe, \"rTExMWjvQWNT2vNB2JgnrfVlDS8=\");\n_c = Globe;\nexport default Globe;\nvar _c;\n$RefreshReg$(_c, \"Globe\");","map":{"version":3,"names":["React","useEffect","useRef","useState","THREE","jsxDEV","_jsxDEV","Globe","_s","globeRef","geoJsonCountries","setGeoJsonCountries","renderer","scene","camera","globe","isDragging","clickStart","raycaster","Raycaster","mouse","Vector2","fetch","then","response","json","geoData","features","current","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","setSize","appendChild","domElement","geometry","SphereGeometry","material","MeshBasicMaterial","color","wireframe","Mesh","add","position","z","mapCountriesToGlobe","animate","requestAnimationFrame","rotation","y","render","catch","error","console","handleMouseDown","event","x","clientX","clientY","handleMouseMove","deltaMove","Math","abs","addEventListener","removeEventListener","forEach","feature","coordinates","countryGroup","Group","type","mapPolygonToGlobe","polygon","coordSet","points","longitude","latitude","phi","PI","theta","sin","cos","push","Vector3","BufferGeometry","setFromPoints","LineBasicMaterial","linewidth","opacity","transparent","line","Line","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kietla92/travel-app/front-end/src/components/Globe.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\n\nconst Globe = () => {\n  const globeRef = useRef();\n  const [geoJsonCountries, setGeoJsonCountries] = useState([]); // GeoJSON data for globe rendering\n\n  const renderer = useRef(null);\n  const scene = useRef(null);\n  const camera = useRef(null);\n  const globe = useRef(null);\n  const isDragging = useRef(false);\n  const clickStart = useRef(null);\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n\n  useEffect(() => {\n    // Load the GeoJSON file for country borders (for globe rendering)\n    fetch(\"/data/countries.geojson\")\n      .then((response) => response.json())\n      .then((geoData) => {\n        setGeoJsonCountries(geoData.features); // Store GeoJSON data\n\n        if (!renderer.current && !scene.current && !camera.current) {\n          scene.current = new THREE.Scene();\n          camera.current = new THREE.PerspectiveCamera(\n            75,\n            window.innerWidth / window.innerHeight,\n            0.1,\n            1000\n          );\n          renderer.current = new THREE.WebGLRenderer();\n          renderer.current.setSize(window.innerWidth, window.innerHeight);\n          globeRef.current.appendChild(renderer.current.domElement);\n\n          const geometry = new THREE.SphereGeometry(5, 32, 32);\n          const material = new THREE.MeshBasicMaterial({\n            color: 0x87ceeb,\n            wireframe: false,\n          });\n          globe.current = new THREE.Mesh(geometry, material);\n          scene.current.add(globe.current);\n\n          camera.current.position.z = 10;\n\n          mapCountriesToGlobe(geoData.features); // Map GeoJSON data to the globe\n\n          const animate = () => {\n            requestAnimationFrame(animate);\n            if (!isDragging.current) {\n              globe.current.rotation.y += 0.01;\n            }\n            renderer.current.render(scene.current, camera.current);\n          };\n          animate();\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error loading GeoJSON:\", error);\n      });\n\n    // Mouse interaction handlers\n    const handleMouseDown = (event) => {\n      isDragging.current = false;\n      clickStart.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n    };\n\n    const handleMouseMove = (event) => {\n      if (!clickStart.current) return;\n\n      const deltaMove = {\n        x: event.clientX - clickStart.current.x,\n        y: event.clientY - clickStart.current.y,\n      };\n\n      if (Math.abs(deltaMove.x) > 2 || Math.abs(deltaMove.y) > 2) {\n        isDragging.current = true;\n        globe.current.rotation.y += deltaMove.x * 0.005;\n        globe.current.rotation.x += deltaMove.y * 0.005;\n        clickStart.current = {\n          x: event.clientX,\n          y: event.clientY,\n        };\n      }\n    };\n\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    window.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  // Function to map GeoJSON countries onto the globe\n  const mapCountriesToGlobe = (features) => {\n    features.forEach((feature) => {\n      const { coordinates } = feature.geometry;\n      const countryGroup = new THREE.Group();\n\n      if (feature.geometry.type === \"Polygon\") {\n        mapPolygonToGlobe(coordinates, countryGroup);\n      } else if (feature.geometry.type === \"MultiPolygon\") {\n        coordinates.forEach((polygon) => {\n          mapPolygonToGlobe(polygon, countryGroup);\n        });\n      }\n\n      globe.current.add(countryGroup); // Add the country group to the globe\n    });\n  };\n\n  // Helper function to map a single polygon to the globe\n  const mapPolygonToGlobe = (polygon, countryGroup) => {\n    polygon.forEach((coordSet) => {\n      const points = [];\n\n      coordSet.forEach(([longitude, latitude]) => {\n        const phi = (90 - latitude) * (Math.PI / 180);\n        const theta = (longitude + 180) * (Math.PI / 180);\n\n        const x = 5 * Math.sin(phi) * Math.cos(theta);\n        const y = 5 * Math.cos(phi);\n        const z = 5 * Math.sin(phi) * Math.sin(theta);\n\n        points.push(new THREE.Vector3(x, y, z));\n      });\n\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const material = new THREE.LineBasicMaterial({\n        color: 0xffffff, // White color for country borders\n        linewidth: 1,\n        opacity: 0.8,\n        transparent: true,\n      });\n      const line = new THREE.Line(geometry, material);\n      countryGroup.add(line);\n    });\n  };\n\n  return <div ref={globeRef} />;\n};\n\nexport default Globe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}