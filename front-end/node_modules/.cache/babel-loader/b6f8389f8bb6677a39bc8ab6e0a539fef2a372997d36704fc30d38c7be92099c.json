{"ast":null,"code":"var _jsxFileName = \"/Users/kietla92/travel-app/front-end/src/components/Globe.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport axios from \"axios\"; // Ensure axios is installed\nimport CountryModal from \"./CountryModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Globe = () => {\n  _s();\n  const globeRef = useRef();\n  const [geoJsonCountries, setGeoJsonCountries] = useState([]); // GeoJSON data for globe rendering\n  const [countriesData, setCountriesData] = useState([]); // Detailed data from backend\n  const [selectedCountry, setSelectedCountry] = useState(null);\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n  const renderer = useRef(null);\n  const scene = useRef(null);\n  const camera = useRef(null);\n  const globe = useRef(null);\n  const isDragging = useRef(false);\n  const clickStart = useRef(null);\n  const clickedCountry = useRef(null); // Track the country clicked on mouse down\n  const velocity = useRef({\n    x: 0,\n    y: 0\n  }); // Velocity of spin\n  const isMouseDown = useRef(false); // Track if the mouse is down\n  const inertia = useRef({\n    x: 0,\n    y: 0\n  }); // Inertia effect for continued spinning\n\n  // Constants for spin speed control\n  const MAX_SPEED = 0.02; // Maximum rotation speed\n  const FRICTION = 0.98; // Friction to slow down the spin\n\n  useEffect(() => {\n    // Fetch country details (hardcoded data) from the backend\n    axios.get(\"http://localhost:3000/countries\").then(response => {\n      setCountriesData(response.data); // Store the detailed countries data from the backend\n    }).catch(error => {\n      console.error(\"Error fetching countries data:\", error);\n    });\n\n    // Load the GeoJSON file for country borders (for globe rendering)\n    fetch(\"/data/countries.geojson\").then(response => response.json()).then(geoData => {\n      setGeoJsonCountries(geoData.features);\n      if (!renderer.current && !scene.current && !camera.current) {\n        scene.current = new THREE.Scene();\n        camera.current = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        renderer.current = new THREE.WebGLRenderer();\n        renderer.current.setSize(window.innerWidth, window.innerHeight);\n        globeRef.current.appendChild(renderer.current.domElement);\n        const geometry = new THREE.SphereGeometry(5, 32, 32);\n        const material = new THREE.MeshBasicMaterial({\n          color: 0x87ceeb,\n          wireframe: false\n        });\n        globe.current = new THREE.Mesh(geometry, material);\n        scene.current.add(globe.current);\n        camera.current.position.z = 10;\n        const animate = () => {\n          requestAnimationFrame(animate);\n\n          // Apply inertia to the globe's rotation (for continued spinning after drag)\n          globe.current.rotation.y += inertia.current.x;\n          globe.current.rotation.x += inertia.current.y;\n\n          // Slow down the inertia gradually\n          inertia.current.x *= FRICTION;\n          inertia.current.y *= FRICTION;\n          renderer.current.render(scene.current, camera.current);\n        };\n        animate();\n      }\n    }).catch(error => {\n      console.error(\"Error loading GeoJSON:\", error);\n    });\n  }, []);\n  useEffect(() => {\n    // Only proceed if both geoJsonCountries and countriesData are loaded\n    if (geoJsonCountries.length > 0 && countriesData.length > 0) {\n      mapCountriesToGlobe(geoJsonCountries);\n    }\n  }, [geoJsonCountries, countriesData]);\n\n  // Function to map GeoJSON countries onto the globe\n  const mapCountriesToGlobe = features => {\n    features.forEach(feature => {\n      const {\n        coordinates\n      } = feature.geometry;\n      let countryName = feature.properties.admin.trim().toLowerCase(); // Normalize GeoJSON country name\n\n      // Check if this country exists in hardcoded countriesData\n      const country = countriesData.find(c => c.name.trim().toLowerCase() === countryName);\n\n      // Set color based on whether the country is visited or not\n      const countryColor = country && country.visited ? 0x00ff00 : 0xff0000; // Green for visited, Red for not visited\n\n      const countryGroup = new THREE.Group();\n\n      // Render countries as polygons or multipolygons\n      if (feature.geometry.type === \"Polygon\") {\n        mapPolygonToGlobe(coordinates, countryGroup, countryColor, country);\n      } else if (feature.geometry.type === \"MultiPolygon\") {\n        coordinates.forEach(polygon => {\n          mapPolygonToGlobe(polygon, countryGroup, countryColor, country);\n        });\n      }\n      globe.current.add(countryGroup); // Add the country group to the globe\n    });\n  };\n\n  // Helper function to map a single polygon to the globe\n  const mapPolygonToGlobe = (polygon, countryGroup, countryColor, country) => {\n    polygon.forEach(coordSet => {\n      const points = [];\n      coordSet.forEach(([longitude, latitude]) => {\n        const phi = (90 - latitude) * (Math.PI / 180);\n        const theta = (longitude + 180) * (Math.PI / 180);\n        const x = 5 * Math.sin(phi) * Math.cos(theta);\n        const y = 5 * Math.cos(phi);\n        const z = 5 * Math.sin(phi) * Math.sin(theta);\n        points.push(new THREE.Vector3(x, y, z));\n      });\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const material = new THREE.LineBasicMaterial({\n        color: countryColor,\n        // Set the color (Green or Red)\n        linewidth: 1,\n        opacity: 0.8,\n        transparent: true\n      });\n      const line = new THREE.Line(geometry, material);\n\n      // Add the country's data to the userData of the line for later retrieval\n      line.userData = {\n        isCountry: true,\n        countryData: country // Store the country data here\n      };\n      countryGroup.add(line);\n    });\n  };\n\n  // Mouse interaction handlers\n  const handleMouseDown = event => {\n    isDragging.current = false;\n    isMouseDown.current = true;\n    clickStart.current = {\n      x: event.clientX,\n      y: event.clientY\n    };\n\n    // Detect which country was clicked on mousedown\n    const mouse = {\n      x: event.clientX / window.innerWidth * 2 - 1,\n      y: -(event.clientY / window.innerHeight) * 2 + 1\n    };\n    raycaster.setFromCamera(mouse, camera.current);\n    const intersects = raycaster.intersectObjects(scene.current.children, true);\n    if (intersects.length > 0) {\n      const clickedObject = intersects[0].object;\n      if (clickedObject && clickedObject.userData && clickedObject.userData.isCountry) {\n        clickedCountry.current = clickedObject.userData.countryData; // Track the country on mouse down\n      }\n    }\n  };\n  const handleMouseMove = event => {\n    if (!clickStart.current || !globe.current || !isMouseDown.current) return;\n    const deltaMove = {\n      x: event.clientX - clickStart.current.x,\n      y: event.clientY - clickStart.current.y\n    };\n    if (Math.abs(deltaMove.x) > 2 || Math.abs(deltaMove.y) > 2) {\n      isDragging.current = true;\n      globe.current.rotation.y += deltaMove.x * 0.005;\n      globe.current.rotation.x += deltaMove.y * 0.005;\n      velocity.current.x = deltaMove.x * 0.0005; // Capture velocity based on drag speed\n      velocity.current.y = deltaMove.y * 0.0005;\n      clickStart.current = {\n        x: event.clientX,\n        y: event.clientY\n      };\n    }\n  };\n  const handleMouseUp = event => {\n    // If it's not dragging and the country clicked on mouse down matches mouse up\n    if (!isDragging.current && clickedCountry.current) {\n      if (clickedCountry.current && clickedCountry.current.visited) {\n        setSelectedCountry(clickedCountry.current); // Only show modal if the country was visited\n      }\n    }\n\n    // Apply inertia based on velocity when the user releases the mouse\n    inertia.current.x = Math.min(Math.max(velocity.current.x, -MAX_SPEED), MAX_SPEED);\n    inertia.current.y = Math.min(Math.max(velocity.current.y, -MAX_SPEED), MAX_SPEED);\n\n    // Reset the click tracking and dragging\n    clickStart.current = null;\n    clickedCountry.current = null;\n    isDragging.current = false;\n    isMouseDown.current = false;\n  };\n  window.addEventListener(\"mousedown\", handleMouseDown);\n  window.addEventListener(\"mousemove\", handleMouseMove);\n  window.addEventListener(\"mouseup\", handleMouseUp);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: globeRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CountryModal, {\n      isOpen: !!selectedCountry,\n      countryData: selectedCountry,\n      onClose: () => setSelectedCountry(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n_s(Globe, \"7L3huc4FxkSosSVUiNwSC13pP8o=\");\n_c = Globe;\nexport default Globe;\nvar _c;\n$RefreshReg$(_c, \"Globe\");","map":{"version":3,"names":["React","useEffect","useRef","useState","THREE","axios","CountryModal","jsxDEV","_jsxDEV","Globe","_s","globeRef","geoJsonCountries","setGeoJsonCountries","countriesData","setCountriesData","selectedCountry","setSelectedCountry","raycaster","Raycaster","mouse","Vector2","renderer","scene","camera","globe","isDragging","clickStart","clickedCountry","velocity","x","y","isMouseDown","inertia","MAX_SPEED","FRICTION","get","then","response","data","catch","error","console","fetch","json","geoData","features","current","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","setSize","appendChild","domElement","geometry","SphereGeometry","material","MeshBasicMaterial","color","wireframe","Mesh","add","position","z","animate","requestAnimationFrame","rotation","render","length","mapCountriesToGlobe","forEach","feature","coordinates","countryName","properties","admin","trim","toLowerCase","country","find","c","name","countryColor","visited","countryGroup","Group","type","mapPolygonToGlobe","polygon","coordSet","points","longitude","latitude","phi","Math","PI","theta","sin","cos","push","Vector3","BufferGeometry","setFromPoints","LineBasicMaterial","linewidth","opacity","transparent","line","Line","userData","isCountry","countryData","handleMouseDown","event","clientX","clientY","setFromCamera","intersects","intersectObjects","children","clickedObject","object","handleMouseMove","deltaMove","abs","handleMouseUp","min","max","addEventListener","ref","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onClose","_c","$RefreshReg$"],"sources":["/Users/kietla92/travel-app/front-end/src/components/Globe.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport axios from \"axios\"; // Ensure axios is installed\nimport CountryModal from \"./CountryModal\";\n\nconst Globe = () => {\n  const globeRef = useRef();\n  const [geoJsonCountries, setGeoJsonCountries] = useState([]); // GeoJSON data for globe rendering\n  const [countriesData, setCountriesData] = useState([]); // Detailed data from backend\n  const [selectedCountry, setSelectedCountry] = useState(null);\n\n  const raycaster = new THREE.Raycaster();\n  const mouse = new THREE.Vector2();\n\n  const renderer = useRef(null);\n  const scene = useRef(null);\n  const camera = useRef(null);\n  const globe = useRef(null);\n  const isDragging = useRef(false);\n  const clickStart = useRef(null);\n  const clickedCountry = useRef(null); // Track the country clicked on mouse down\n  const velocity = useRef({ x: 0, y: 0 }); // Velocity of spin\n  const isMouseDown = useRef(false); // Track if the mouse is down\n  const inertia = useRef({ x: 0, y: 0 }); // Inertia effect for continued spinning\n\n  // Constants for spin speed control\n  const MAX_SPEED = 0.02; // Maximum rotation speed\n  const FRICTION = 0.98; // Friction to slow down the spin\n\n  useEffect(() => {\n    // Fetch country details (hardcoded data) from the backend\n    axios\n      .get(\"http://localhost:3000/countries\")\n      .then((response) => {\n        setCountriesData(response.data); // Store the detailed countries data from the backend\n      })\n      .catch((error) => {\n        console.error(\"Error fetching countries data:\", error);\n      });\n\n    // Load the GeoJSON file for country borders (for globe rendering)\n    fetch(\"/data/countries.geojson\")\n      .then((response) => response.json())\n      .then((geoData) => {\n        setGeoJsonCountries(geoData.features);\n\n        if (!renderer.current && !scene.current && !camera.current) {\n          scene.current = new THREE.Scene();\n          camera.current = new THREE.PerspectiveCamera(\n            75,\n            window.innerWidth / window.innerHeight,\n            0.1,\n            1000\n          );\n          renderer.current = new THREE.WebGLRenderer();\n          renderer.current.setSize(window.innerWidth, window.innerHeight);\n          globeRef.current.appendChild(renderer.current.domElement);\n\n          const geometry = new THREE.SphereGeometry(5, 32, 32);\n          const material = new THREE.MeshBasicMaterial({\n            color: 0x87ceeb,\n            wireframe: false,\n          });\n          globe.current = new THREE.Mesh(geometry, material);\n          scene.current.add(globe.current);\n\n          camera.current.position.z = 10;\n\n          const animate = () => {\n            requestAnimationFrame(animate);\n\n            // Apply inertia to the globe's rotation (for continued spinning after drag)\n            globe.current.rotation.y += inertia.current.x;\n            globe.current.rotation.x += inertia.current.y;\n\n            // Slow down the inertia gradually\n            inertia.current.x *= FRICTION;\n            inertia.current.y *= FRICTION;\n\n            renderer.current.render(scene.current, camera.current);\n          };\n          animate();\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error loading GeoJSON:\", error);\n      });\n  }, []);\n\n  useEffect(() => {\n    // Only proceed if both geoJsonCountries and countriesData are loaded\n    if (geoJsonCountries.length > 0 && countriesData.length > 0) {\n      mapCountriesToGlobe(geoJsonCountries);\n    }\n  }, [geoJsonCountries, countriesData]);\n\n  // Function to map GeoJSON countries onto the globe\n  const mapCountriesToGlobe = (features) => {\n    features.forEach((feature) => {\n      const { coordinates } = feature.geometry;\n      let countryName = feature.properties.admin.trim().toLowerCase(); // Normalize GeoJSON country name\n\n      // Check if this country exists in hardcoded countriesData\n      const country = countriesData.find(\n        (c) => c.name.trim().toLowerCase() === countryName\n      );\n\n      // Set color based on whether the country is visited or not\n      const countryColor = country && country.visited ? 0x00ff00 : 0xff0000; // Green for visited, Red for not visited\n\n      const countryGroup = new THREE.Group();\n\n      // Render countries as polygons or multipolygons\n      if (feature.geometry.type === \"Polygon\") {\n        mapPolygonToGlobe(coordinates, countryGroup, countryColor, country);\n      } else if (feature.geometry.type === \"MultiPolygon\") {\n        coordinates.forEach((polygon) => {\n          mapPolygonToGlobe(polygon, countryGroup, countryColor, country);\n        });\n      }\n\n      globe.current.add(countryGroup); // Add the country group to the globe\n    });\n  };\n\n  // Helper function to map a single polygon to the globe\n  const mapPolygonToGlobe = (polygon, countryGroup, countryColor, country) => {\n    polygon.forEach((coordSet) => {\n      const points = [];\n\n      coordSet.forEach(([longitude, latitude]) => {\n        const phi = (90 - latitude) * (Math.PI / 180);\n        const theta = (longitude + 180) * (Math.PI / 180);\n\n        const x = 5 * Math.sin(phi) * Math.cos(theta);\n        const y = 5 * Math.cos(phi);\n        const z = 5 * Math.sin(phi) * Math.sin(theta);\n\n        points.push(new THREE.Vector3(x, y, z));\n      });\n\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const material = new THREE.LineBasicMaterial({\n        color: countryColor, // Set the color (Green or Red)\n        linewidth: 1,\n        opacity: 0.8,\n        transparent: true,\n      });\n      const line = new THREE.Line(geometry, material);\n\n      // Add the country's data to the userData of the line for later retrieval\n      line.userData = {\n        isCountry: true,\n        countryData: country, // Store the country data here\n      };\n\n      countryGroup.add(line);\n    });\n  };\n\n  // Mouse interaction handlers\n  const handleMouseDown = (event) => {\n    isDragging.current = false;\n    isMouseDown.current = true;\n    clickStart.current = {\n      x: event.clientX,\n      y: event.clientY,\n    };\n\n    // Detect which country was clicked on mousedown\n    const mouse = {\n      x: (event.clientX / window.innerWidth) * 2 - 1,\n      y: -(event.clientY / window.innerHeight) * 2 + 1,\n    };\n    raycaster.setFromCamera(mouse, camera.current);\n    const intersects = raycaster.intersectObjects(scene.current.children, true);\n\n    if (intersects.length > 0) {\n      const clickedObject = intersects[0].object;\n      if (\n        clickedObject &&\n        clickedObject.userData &&\n        clickedObject.userData.isCountry\n      ) {\n        clickedCountry.current = clickedObject.userData.countryData; // Track the country on mouse down\n      }\n    }\n  };\n\n  const handleMouseMove = (event) => {\n    if (!clickStart.current || !globe.current || !isMouseDown.current) return;\n\n    const deltaMove = {\n      x: event.clientX - clickStart.current.x,\n      y: event.clientY - clickStart.current.y,\n    };\n\n    if (Math.abs(deltaMove.x) > 2 || Math.abs(deltaMove.y) > 2) {\n      isDragging.current = true;\n      globe.current.rotation.y += deltaMove.x * 0.005;\n      globe.current.rotation.x += deltaMove.y * 0.005;\n      velocity.current.x = deltaMove.x * 0.0005; // Capture velocity based on drag speed\n      velocity.current.y = deltaMove.y * 0.0005;\n\n      clickStart.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n    }\n  };\n\n  const handleMouseUp = (event) => {\n    // If it's not dragging and the country clicked on mouse down matches mouse up\n    if (!isDragging.current && clickedCountry.current) {\n      if (clickedCountry.current && clickedCountry.current.visited) {\n        setSelectedCountry(clickedCountry.current); // Only show modal if the country was visited\n      }\n    }\n\n    // Apply inertia based on velocity when the user releases the mouse\n    inertia.current.x = Math.min(\n      Math.max(velocity.current.x, -MAX_SPEED),\n      MAX_SPEED\n    );\n    inertia.current.y = Math.min(\n      Math.max(velocity.current.y, -MAX_SPEED),\n      MAX_SPEED\n    );\n\n    // Reset the click tracking and dragging\n    clickStart.current = null;\n    clickedCountry.current = null;\n    isDragging.current = false;\n    isMouseDown.current = false;\n  };\n\n  window.addEventListener(\"mousedown\", handleMouseDown);\n  window.addEventListener(\"mousemove\", handleMouseMove);\n  window.addEventListener(\"mouseup\", handleMouseUp);\n\n  return (\n    <div>\n      <div ref={globeRef} />\n      <CountryModal\n        isOpen={!!selectedCountry}\n        countryData={selectedCountry}\n        onClose={() => setSelectedCountry(null)}\n      />\n    </div>\n  );\n};\n\nexport default Globe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}